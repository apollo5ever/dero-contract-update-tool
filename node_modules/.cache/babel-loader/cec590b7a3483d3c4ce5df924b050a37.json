{"ast":null,"code":"var _jsxFileName = \"/home/acer/Dero/dero-contract-update-tool/src/App.js\",\n    _s = $RefreshSig$();\n\nimport DeroBridgeApi from 'dero-rpc-bridge-api';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport to from 'await-to-js';\nimport './app.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [availability, setAvailability] = React.useState('');\n  const deroBridgeApiRef = React.useRef();\n  const [bridgeInitText, setBridgeInitText] = React.useState('Not connected to extension');\n  React.useEffect(() => {\n    const load = async () => {\n      deroBridgeApiRef.current = new DeroBridgeApi();\n      const deroBridgeApi = deroBridgeApiRef.current;\n      const [err] = await to(deroBridgeApi.init());\n\n      if (err) {\n        setBridgeInitText('failed to connect to extension');\n      } else {\n        setBridgeInitText('connected to extension');\n      }\n    };\n\n    window.addEventListener('load', load);\n    return () => window.removeEventListener('load', load);\n  }, []); //------------------WALLET Functions ---------------------------------\n\n  const updateContract = React.useCallback(async event => {\n    event.preventDefault();\n    var code = event.target.code.value;\n    var transfers = [];\n\n    if (event.target.amount.value) {\n      transfers.push(new Object({\n        \"burn\": parseInt(event.target.amount.value),\n        \"scid\": event.target.asset.value\n      }));\n    }\n\n    const deroBridgeApi = deroBridgeApiRef.current;\n    const [err, res] = await to(deroBridgeApi.daemon('get-gas-estimate', {\n      \"scid\": event.target.scid.value,\n      \"ringsize\": 2,\n      \"transfers\": transfers,\n      // \"fees\": parseInt(event.target.fee.value) * 100000,\n      \"sc_rpc\": [{\n        \"name\": \"entrypoint\",\n        \"datatype\": \"S\",\n        \"value\": event.target.entrypoint.value\n      }, {\n        \"name\": event.target.var.value,\n        \"datatype\": \"S\",\n        \"value\": code\n      }]\n    }));\n    console.log(err);\n    console.log(res);\n  });\n  const donate = React.useCallback(async event => {\n    event.preventDefault();\n    const deroBridgeApi = deroBridgeApiRef.current;\n    const [err, res] = await to(deroBridgeApi.wallet('start-transfer', {\n      \"transfers\": [{\n        \"destination\": \"apollo\",\n        \"amount\": 100000\n      }],\n      \"ringsize\": 16\n    }));\n    console.log(err);\n    console.log(res);\n  }); //----------------------------USER INTERFACE-----------------------------------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: bridgeInitText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"function\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \" Update Contract Code \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: updateContract,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your Contract's SCID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"scid\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your Contract's Update Function Name (Entrypoint)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"entrypoint\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your Contract's Variable Name For the New Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"var\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Fee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"fee\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Asset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"asset\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"amount\",\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"New Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Enter New Code Here\",\n          rows: \"44\",\n          cols: \"80\",\n          id: \"code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        onClick: donate,\n        children: \"Click here to buy a coffee for apollo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 10\n  }, this);\n};\n\n_s(App, \"PoMr5JDzifog+MCfLqkS5Gh83uo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["DeroBridgeApi","React","ReactDOM","to","App","availability","setAvailability","useState","deroBridgeApiRef","useRef","bridgeInitText","setBridgeInitText","useEffect","load","current","deroBridgeApi","err","init","window","addEventListener","removeEventListener","updateContract","useCallback","event","preventDefault","code","target","value","transfers","amount","push","Object","parseInt","asset","res","daemon","scid","entrypoint","var","console","log","donate","wallet"],"sources":["/home/acer/Dero/dero-contract-update-tool/src/App.js"],"sourcesContent":["\n\nimport DeroBridgeApi from 'dero-rpc-bridge-api'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport to from 'await-to-js'\nimport './app.css'\n\nconst App = () => {\n\n\n  const [availability, setAvailability] = React.useState('')\n  const deroBridgeApiRef = React.useRef()\n  const [bridgeInitText, setBridgeInitText] = React.useState('Not connected to extension')\n\n  React.useEffect(() => {\n    const load = async () => {\n      deroBridgeApiRef.current = new DeroBridgeApi()\n      const deroBridgeApi = deroBridgeApiRef.current\n      const [err] = await to(deroBridgeApi.init())\n      if (err) {\n        setBridgeInitText('failed to connect to extension')\n      } else {\n        setBridgeInitText('connected to extension')\n      }\n    }\n\n    window.addEventListener('load', load)\n    return () => window.removeEventListener('load', load)\n  }, [])\n\n\n  //------------------WALLET Functions ---------------------------------\n\n  const updateContract = React.useCallback(async (event) => {\n    event.preventDefault();\n    var code = event.target.code.value\n    var transfers = []\n    if (event.target.amount.value){\n      transfers.push(new Object({\n        \"burn\":parseInt(event.target.amount.value),\n          \"scid\":event.target.asset.value\n      }))\n    }\n    const deroBridgeApi = deroBridgeApiRef.current\n    const [err, res] = await to(deroBridgeApi.daemon('get-gas-estimate', {\n      \"scid\": event.target.scid.value,\n      \"ringsize\": 2,\n      \"transfers\":transfers,\n     // \"fees\": parseInt(event.target.fee.value) * 100000,\n      \"sc_rpc\": [{\n        \"name\": \"entrypoint\",\n        \"datatype\": \"S\",\n        \"value\": event.target.entrypoint.value\n      },\n      {\n        \"name\": event.target.var.value,\n        \"datatype\": \"S\",\n        \"value\": code\n      }]\n    }))\n\n    console.log(err)\n    console.log(res)\n  })\n\n  const donate = React.useCallback(async (event) => {\n    event.preventDefault();\n   \n    const deroBridgeApi = deroBridgeApiRef.current\n    const [err, res] = await to(deroBridgeApi.wallet('start-transfer', {\n      \"transfers\": [{\n        \"destination\": \"apollo\",\n        \"amount\": 100000\n      }\n      ],\n      \"ringsize\": 16\n    }))\n\n    console.log(err)\n    console.log(res)\n  })\n\n\n  //----------------------------USER INTERFACE-----------------------------------------------------------------------------------\n\n\n  return <div>\n\n    <div>{bridgeInitText}</div>\n\n\n    <div className=\"function\">\n      <h3> Update Contract Code </h3>\n      <form onSubmit={updateContract}>\n        <p>Your Contract's SCID</p>\n        <input id=\"scid\" type=\"text\" />\n        <p>Your Contract's Update Function Name (Entrypoint)</p>\n        <input id=\"entrypoint\" type=\"text\" />\n        <p>Your Contract's Variable Name For the New Code</p>\n        <input id=\"var\" type=\"text\" />\n        <p>Fee</p>\n        <input id=\"fee\" type=\"text\" />\n        <p>Asset</p>\n        <input id=\"asset\" type=\"text\" />\n        <p>Amount</p>\n        <input id=\"amount\" type=\"text\" />\n        <p>New Code</p>\n        <textarea placeholder=\"Enter New Code Here\" rows=\"44\" cols=\"80\" id=\"code\" />\n        <button type={\"submit\"}>Update</button>\n      </form>\n    </div>\n\n\n\n\n\n\n    <footer><small onClick={donate}>Click here to buy a coffee for apollo</small></footer>\n  </div>\n\n\n\n\n}\n\n\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}